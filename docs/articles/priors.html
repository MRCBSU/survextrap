<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="survextrap">
<title>Priors in survextrap models • survextrap</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Priors in survextrap models">
<meta property="og:description" content="survextrap">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">survextrap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/examples.html">Examples of using survextrap</a>
    <a class="dropdown-item" href="../articles/methods.html">Details of methods behind survextrap</a>
    <a class="dropdown-item" href="../articles/priors.html">Priors in survextrap models</a>
    <a class="dropdown-item" href="../articles/waning.html">Treatment effect waning in survextrap</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/chjackson/survextrap/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Priors in survextrap models</h1>
                        <h4 data-toc-skip class="author">Christopher
Jackson <a href="mailto:chris.jackson@mrc-bsu.cam.ac.uk" class="email">chris.jackson@mrc-bsu.cam.ac.uk</a>
</h4>
            
            <h4 data-toc-skip class="date">2023-03-30</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/chjackson/survextrap/blob/HEAD/vignettes/priors.Rmd" class="external-link"><code>vignettes/priors.Rmd</code></a></small>
      <div class="d-none name"><code>priors.Rmd</code></div>
    </div>

    
    
<p>The flexible survival models in <code>survextrap</code> are
<strong>Bayesian</strong>.</p>
<p>This means that they analyse data under a <strong>parametric</strong>
model, which assumes that each data point <span class="math inline">\(x\)</span> comes from a sampling distribution with
probability density function <span class="math inline">\(f(x|\theta)\)</span>. The parameters <span class="math inline">\(\theta\)</span> are estimated by combining a
“prior” distribution <span class="math inline">\(p(\theta)\)</span>,
representing beliefs about model parameters external to the data, with a
“likelihood” that represents the information from a set of data <span class="math inline">\(\boldsymbol{x}\)</span>, producing a posterior
distribution <span class="math inline">\(p(\theta |
\boldsymbol{x})\)</span>.</p>
<p>The principle behind the package is that any information that is
relevant to extrapolation should be represented transparently. This is
arguably clearest if expressed through <strong>data</strong> or
<strong>parametric mechanisms</strong>.</p>
<ul>
<li><p><strong>Data</strong> x include individual-level, right-censored
survival data, and aggregate counts of survivors, as described on the
front page. Expert judgements about survival can be converted to
pseudo-data in the form of aggregate counts.</p></li>
<li>
<p><strong>Parametric mechanisms</strong> denote the form of <span class="math inline">\(f()\)</span>. These might include the notion that
some people are cured (mixture cure models), or that disease-specific
and background hazards can be modelled additively (relative survival
models). Conventional parametric survival models (like the Weibull and
log-logistic) are generally used out of familiarity, not because they
are thought to represent meaningful mechanisms for survival.</p>
<p>The default parametric model in <code>survextrap</code> is a flexible
spline-based model. This is designed as a “black box”, which aims to fit
the data as well as possible. It is is not designed to be treated as a
mechanism for extrapolation.</p>
<p>However, this spline model has parameters <span class="math inline">\(\theta\)</span>, which still need prior
distributions, because the model is Bayesian!</p>
</li>
</ul>
<p>This article describes these two kinds of “prior” that can be used in
<code>survextrap</code> models.</p>
<ol style="list-style-type: decimal">
<li><p>Judgements about survival probabilities, that can be converted to
pseudo-data, and treated as part of the model likelihood for data <span class="math inline">\(\boldsymbol{x}\)</span>.</p></li>
<li><p>Priors on parameters <span class="math inline">\(\theta\)</span>
in spline models.</p></li>
</ol>
<div class="section level2">
<h2 id="converting-prior-judgements-about-survival-to-external-data">Converting prior judgements about survival to external data<a class="anchor" aria-label="anchor" href="#converting-prior-judgements-about-survival-to-external-data"></a>
</h2>
<p>We suppose there is some expert judgement about survival over the
time period from <span class="math inline">\(t\)</span> to <span class="math inline">\(u\)</span>, and we can “elicit” this as the
probability <span class="math inline">\(p\)</span> that a person who is
alive at <span class="math inline">\(t\)</span> will have died before
<span class="math inline">\(u\)</span>.</p>
<p>This elicitation might be done in many ways (e.g. through consensus
methods, or consulting multiple experts and aggregating their beliefs).
survextrap does not include tools or guidance for doing elicitation, but
further info is available, e.g. from <a href="https://journals.sagepub.com/doi/pdf/10.1177/0272989X211028236" class="external-link">Bojke
et al.</a>, <a href="https://shelf.sites.sheffield.ac.uk/" class="external-link">SHELF</a>.</p>
<p>One simple way is to elicit:</p>
<ul>
<li><p>a best guess for what <span class="math inline">\(p\)</span> is.
We could interpret this as the <em>median</em> of the prior
distribution.</p></li>
<li><p>upper and lower prior credible limits, such that we are (for
example) 90% sure that <span class="math inline">\(p\)</span> is within
this range. We can interpret these as the 5% and 95% quantiles.</p></li>
</ul>
<p>As an example, suppose we elicited a best guess of 0.6, and a 90%
credible interval of 0.4 to 0.8. These can be fitted to a
<em>probability distribution</em> representing beliefs about <span class="math inline">\(p\)</span>. The SHELF R package provides a useful
function, <code>fitdist</code>, to do this. We use this to fit a
<em>Beta</em> distribution, a typically-used distribution for
probabilities.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/OakleyJ/SHELF" class="external-link">SHELF</a></span><span class="op">)</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="fl">0.6</span>, <span class="fl">0.8</span><span class="op">)</span></span>
<span><span class="va">bet</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/SHELF/man/fitdist.html" class="external-link">fitdist</a></span><span class="op">(</span>vals<span class="op">=</span><span class="va">p</span>, probs<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.5</span>, <span class="fl">0.95</span><span class="op">)</span>, lower<span class="op">=</span><span class="fl">0</span>, upper<span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op">$</span><span class="va">Beta</span></span>
<span><span class="va">bet</span></span></code></pre></div>
<pre><code><span><span class="co">##     shape1  shape2</span></span>
<span><span class="co">## 1 9.190895 6.19854</span></span></code></pre>
<p>This gives a Beta(9.2, 6.2) distribution. We can plot its probability
density function, to check that the distribution represents the beliefs
about <span class="math inline">\(p\)</span> that we intended to
use:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">p</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_function.html" class="external-link">stat_function</a></span><span class="op">(</span>fun <span class="op">=</span> <span class="va">dbeta</span>, args<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>shape1<span class="op">=</span><span class="va">bet</span><span class="op">$</span><span class="va">shape1</span>, shape2<span class="op">=</span><span class="va">bet</span><span class="op">$</span><span class="va">shape2</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Density"</span><span class="op">)</span></span></code></pre></div>
<p><img src="priors_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<p>We now convert the elicited Beta distribution to pseudo-data.</p>
<p>The trick for doing this comes from a basic result about Bayesian
estimation of an event probability <span class="math inline">\(p\)</span>. Suppose we start with a Beta<span class="math inline">\((a,b)\)</span> prior for <span class="math inline">\(p\)</span>, and observe <span class="math inline">\(y\)</span> events out of <span class="math inline">\(n\)</span> individual observations, where each
observation may or may not have resulted in an event, so that <span class="math inline">\(y\)</span> comes from a Binomial distribution with
probability <span class="math inline">\(p\)</span>. The posterior for
<span class="math inline">\(p\)</span> is then Beta<span class="math inline">\((a+y, b+n-y)\)</span>.</p>
<p>We can then equate our elicited belief (call it Beta<span class="math inline">\((e_1, e_2)\)</span>, say) with a posterior
distribution under a vague prior (say a Beta<span class="math inline">\((a=0,b=0)\)</span>). Therefore <span class="math inline">\(e_1=a+y\)</span> and <span class="math inline">\(e_2 = b+n-y\)</span>, hence <span class="math inline">\(y=e_1\)</span>, <span class="math inline">\(n =
e_1 + e_2\)</span>.</p>
<p>In other words, our elicited Beta<span class="math inline">\((e_1,e_2)\)</span> distribution is equivalent to
the knowledge from an aggregate count of <span class="math inline">\(e_1\)</span> events out of <span class="math inline">\(e_1 + e_2\)</span> observations. This aggregate
“pseudo-data” can be used as an <code>external</code> data source in
<code>survextrap</code>.</p>
<p>For example, the Beta(9,6) distribution above is equivalent to
pseudo-data of 9 events out of 15 trials. The point estimate of the
event probability from this data would be 9/15 = 0.6 (our original
guess). A pseudo-dataset of 90 events out of 150 trials would have the
same median, but a narrower credible interval, since the dataset is
larger, implying greater confidence that the true <span class="math inline">\(p\)</span> is near to the point estimate.</p>
<div class="section level4">
<h4 id="further-notes-on-elicitation">Further notes on elicitation<a class="anchor" aria-label="anchor" href="#further-notes-on-elicitation"></a>
</h4>
<ul>
<li><p>Academic note: there are different ways of defining a vague Beta
prior for a probability. Beta<span class="math inline">\((0,0)\)</span>
is a uniform distribution for the log odds <span class="math inline">\(\log(p/(1-p))\)</span>, and Beta<span class="math inline">\((1,1)\)</span> is uniform on the scale of the
probability <span class="math inline">\(p\)</span>. The “Jeffreys” prior
Beta<span class="math inline">\((0.5, 0.5)\)</span> is sometimes used as
a compromise between these. The difference between these choices is
unlikely to matter in practice.</p></li>
<li><p>We could elicit survival probabilities over different time
intervals, and use these as multiple <code>external</code> datasets in
<code>survextrap</code>.</p></li>
<li><p>It would probably not be appropriate to include beliefs about the
same quantity, elicited from multiple experts, as multiple external
datasets in <code>survextrap</code>. This is because the experts may
have shared beliefs based on their common knowledge of the field. If
multiple experts are consulted about the same quantity, their beliefs
should be aggregated into a single distribution before using
<code>survextrap</code>, e.g. by using mathematical aggregation or a
consensus method. Again, see, e.g. <a href="https://journals.sagepub.com/doi/pdf/10.1177/0272989X211028236" class="external-link">Bojke
et al.</a> or <a href="https://shelf.sites.sheffield.ac.uk/" class="external-link">SHELF</a>,
for more information about elicitation.</p></li>
</ul>
<!-- [Do we want an illustration of a survextrap model here?] -->
</div>
</div>
<div class="section level2">
<h2 id="priors-on-spline-parameters">Priors on spline parameters<a class="anchor" aria-label="anchor" href="#priors-on-spline-parameters"></a>
</h2>
<p>The parameters of the spline model are mathematical abstractions
which do not have meaningful interpretations such as means or variances
for survival times. However for Bayesian modelling, we still have to
place priors on them.</p>
<p>A general way to ensure that the chosen priors represent meaningful
beliefs is through <em>simulation</em>. <code>survextrap</code> provides
some tools for this.</p>
<div class="section level3">
<h3 id="plotting-plausible-hazard-trajectories">Plotting plausible hazard trajectories<a class="anchor" aria-label="anchor" href="#plotting-plausible-hazard-trajectories"></a>
</h3>
<p>Before fitting a model, we can use the <code>mspline_priorpred</code>
function to check that hazard curves simulated from the prior would be
considered plausible representations of the knowledge that exists
outside the data.</p>
<p>To use this before the model is fitted, we have to know the knots
defining the spline, and choose a set of priors. <code>survextrap</code>
provides a set of default priors, which may or may not be sensible in a
given application, and a procedure for picking knots.</p>
<!-- (TODO: what about a "no fit" model option.  Then we can return functions that work like
mspline_priorpred ) -->
<p>First we fit a default model and print the default priors that are
used.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/chjackson/survextrap" class="external-link">survextrap</a></span><span class="op">)</span></span>
<span><span class="va">nd_mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/survextrap.html">survextrap</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">years</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="fl">1</span>, data<span class="op">=</span><span class="va">colons</span>, fit_method<span class="op">=</span><span class="st">"opt"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/print_priors.html">print_priors</a></span><span class="op">(</span><span class="va">nd_mod</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Priors:</span></span>
<span><span class="co">##   Baseline log hazard scale: normal(location=0,scale=20)</span></span>
<span><span class="co">##   Smoothness SD: gamma(shape=2,rate=1)</span></span></code></pre>
<p>The “baseline log hazard scale” parameter is the parameter <span class="math inline">\(\log(\eta)\)</span> in the definition of the
M-spline function for the hazard: <span class="math inline">\(h(t) =
\eta \sum_k p_k b_k(t)\)</span>. By itself, <span class="math inline">\(\eta\)</span> does not define a hazard. It only
defines a hazard after being combined with the basis coefficients <span class="math inline">\(p_k\)</span> and basis terms <span class="math inline">\(b_k()\)</span>.</p>
<p>The “smoothness SD” is the parameter <span class="math inline">\(\sigma\)</span> . This is even harder to interpret
than <span class="math inline">\(\eta\)</span>. Values of <span class="math inline">\(\sigma=0\)</span> represent certainty that the
hazard is the one defined by the prior mean for the <span class="math inline">\(p_k\)</span>. Values of 1 or more favour wiggly
hazard curves, while very high values are <a href="methods.html#priorhaz">not meaningful</a>.</p>
<p>The prior mean for the <span class="math inline">\(p_k\)</span> can
be examined in <code>coefs_mean</code> - by default, this defines a
hazard function <span class="math inline">\(h(t)\)</span> that is
constant over time. The number and location of knots can also be
examined in the <code>mspline</code> component of the model.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">nd_mod</span><span class="op">$</span><span class="va">coefs_mean</span>,<span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">sp</span> <span class="op">&lt;-</span> <span class="va">nd_mod</span><span class="op">$</span><span class="va">mspline</span></span></code></pre></div>
<p>Together, these knots and prior choices define the model to be fitted
to the data. We can now simulate the consequences of these choices, in
terms of:</p>
<ul>
<li><p>the typical level of the hazard</p></li>
<li><p>what range of hazard trajectories are plausible</p></li>
<li><p>how much the hazard tends to vary through time</p></li>
</ul>
<p>The fitted model object (<code>nd_mod</code> here) has a component
called <code>prior_pred</code>, which is a list of functions that can be
used to simulate various interesting quantities from this prior
specification.</p>
<div class="section level5">
<h5 id="constant-hazard-level">Constant hazard level<a class="anchor" aria-label="anchor" href="#constant-hazard-level"></a>
</h5>
<p>The first thing to verify is the typical level of the hazard. If no
prior for <span class="math inline">\(\eta\)</span> is supplied in
<code>survextrap</code>, then a default <span class="math inline">\(N(0,20)\)</span> is used, which is very vague. We
can illustrate the implications of this choice by deriving the prior for
the constant hazard <span class="math inline">\(h(t) = \eta \sum_k p_k
b_k(t)\)</span> which is implied by the prior for <span class="math inline">\(\eta\)</span> and the special values of <span class="math inline">\(p_k\)</span> that imply a constant hazard (found
using <code><a href="../reference/mspline_constant_weights.html">mspline_constant_weights()</a></code>).</p>
<p>The <code>haz_const</code> function returns a summary of the implied
prior for this constant hazard, and the implied prior for the mean
survival time <span class="math inline">\(1/h(t)\)</span>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nd_mod</span><span class="op">$</span><span class="va">prior_pred</span><span class="op">$</span><span class="fu">haz_const</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                haz         mean</span></span>
<span><span class="co">## 2.5%  8.573188e-18 1.044229e-17</span></span>
<span><span class="co">## 50%   9.060939e-01 1.103638e+00</span></span>
<span><span class="co">## 97.5% 9.576440e+16 1.166427e+17</span></span></code></pre>
<p>These credible limits are extreme. Perhaps this is reasonable if the
dataset is large and would dominate any choice of prior. In most
applications, however, we have some idea of what a typical survival time
should be, hence what a typical hazard should be, say within an order or
two of magnitude.</p>
<p>A simple heuristic is to specify</p>
<ul>
<li><p>a prior guess (e.g. we guess that average survival time is 50
years after the start of the study)</p></li>
<li><p>a prior upper credible limit (e.g. we guess it is unlikely that
the mean survival time is 80 years after the start of the study). Note
that this represents uncertainty about the mean survival in a
population, rather than the variability between individuals in the
population, so perhaps this should be narrower than you think.</p></li>
<li><p>hence giving a median and lower credible limit for <span class="math inline">\(h(t)\)</span>, hence (after dividing by the
constant <span class="math inline">\(\sum_k p_k b_k(t)\)</span> for an
arbitrary <span class="math inline">\(t\)</span> and logging), giving a
median <span class="math inline">\(m\)</span> and lower credible limit
<span class="math inline">\(L\)</span> for <span class="math inline">\(\log(\eta)\)</span>. Hence a normal prior for
<span class="math inline">\(\log(\eta)\)</span> can be defined with
median <span class="math inline">\(m\)</span>, and standard deviation
<span class="math inline">\((L-m)/2\)</span>.</p></li>
</ul>
<p>This is implemented in the function <code>p_meansurv</code>. Note
that a spline knot specification is required to obtain the constant
<span class="math inline">\(\sum_k p_k b_k(t)\)</span>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/p_meansurv.html">p_meansurv</a></span><span class="op">(</span>median<span class="op">=</span><span class="fl">50</span>, upper<span class="op">=</span><span class="fl">80</span>, mspline<span class="op">=</span><span class="va">sp</span><span class="op">)</span></span></code></pre></div>
<p>For a given prior on <span class="math inline">\(\eta\)</span> and
spline specification, the function <code>prior_haz_const</code> can be
used to summarise the implied prior on the constant hazard and mean
survival time. We use this now to check that the prior that we defined
with <code>p_meansurv</code> is the one that we intended to define.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/prior_haz_const.html">prior_haz_const</a></span><span class="op">(</span>mspline<span class="op">=</span><span class="va">sp</span>, </span>
<span>                prior_loghaz <span class="op">=</span> <span class="fu"><a href="../reference/p_meansurv.html">p_meansurv</a></span><span class="op">(</span>median<span class="op">=</span><span class="fl">50</span>, upper<span class="op">=</span><span class="fl">80</span>, mspline<span class="op">=</span><span class="va">sp</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##          haz  mean</span></span>
<span><span class="co">## 2.5%  0.0125 31.25</span></span>
<span><span class="co">## 50%   0.0200 50.00</span></span>
<span><span class="co">## 97.5% 0.0320 80.00</span></span></code></pre>
<p>The prior median and upper credible limit match the numbers that we
put in. We also get a lower 2.5% credible limit as a consequence of the
normal assumption - this should be checked for plausibility, and the
prior revised if necessary.</p>
<p>Finally, an updated <code>survextrap</code> model can be fitted that
includes the weakly informative prior that we defined and checked. For
reporting purposes, we can use <code>print_priors</code> to view the
normal prior for <span class="math inline">\(\log(\eta)\)</span> that
was automatically derived.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ndi_mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/survextrap.html">survextrap</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">years</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="fl">1</span>, data<span class="op">=</span><span class="va">colons</span>, fit_method<span class="op">=</span><span class="st">"opt"</span>,</span>
<span>                      prior_loghaz <span class="op">=</span> <span class="fu"><a href="../reference/p_meansurv.html">p_meansurv</a></span><span class="op">(</span>median<span class="op">=</span><span class="fl">50</span>, upper<span class="op">=</span><span class="fl">80</span>, mspline<span class="op">=</span><span class="va">sp</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/print_priors.html">print_priors</a></span><span class="op">(</span><span class="va">ndi_mod</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Priors:</span></span>
<span><span class="co">##   Baseline log hazard scale: normal(location=-3.81341071676004,scale=0.2398021764446)</span></span>
<span><span class="co">##   Smoothness SD: gamma(shape=2,rate=1)</span></span></code></pre>
</div>
<div class="section level5">
<h5 id="hazard-as-a-function-of-time">Hazard as a function of time<a class="anchor" aria-label="anchor" href="#hazard-as-a-function-of-time"></a>
</h5>
<p>The <code>prior_pred</code> component includes a function called
<code>haz</code> which simulates a desired number of hazard trajectories
over time, given the prior. This function returns a data frame (here
called <code>haz_sim</code>) which contains the hazard value
<code>haz</code>, time point <code>time</code> and simulation replicate
<code>rep</code>.</p>
<p>Here we simulate <code>nsim=30</code> prior hazard trajectories from
the model <code>ndi_mod</code>, and plot them with
<code>ggplot</code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">haz_sim</span> <span class="op">&lt;-</span> <span class="va">ndi_mod</span><span class="op">$</span><span class="va">prior_pred</span><span class="op">$</span><span class="fu">haz</span><span class="op">(</span>nsim<span class="op">=</span><span class="fl">30</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">haz_sim</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">time</span>, y<span class="op">=</span><span class="va">haz</span>, group<span class="op">=</span><span class="va">rep</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Years"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Hazard"</span><span class="op">)</span></span></code></pre></div>
<p><img src="priors_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>An alternative way is to use the <code>mspline_priorpred</code>
function, which does not require a model to be specified with the
<code>survextrap</code> function, but does require the knots and priors
to be supplied explicitly.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">haz_sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mspline_priorpred.html">mspline_priorpred</a></span><span class="op">(</span>iknots<span class="op">=</span><span class="va">sp</span><span class="op">$</span><span class="va">iknots</span>, bknots<span class="op">=</span><span class="va">sp</span><span class="op">$</span><span class="va">bknots</span>, degree<span class="op">=</span><span class="va">sp</span><span class="op">$</span><span class="va">degree</span>, </span>
<span>                             coefs_mean <span class="op">=</span> <span class="va">ndi_mod</span><span class="op">$</span><span class="va">coefs_mean</span>,   </span>
<span>                             prior_smooth <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">p_gamma</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">1</span><span class="op">)</span>,   </span>
<span>                             prior_loghaz <span class="op">=</span> <span class="fu"><a href="../reference/p_meansurv.html">p_meansurv</a></span><span class="op">(</span>median<span class="op">=</span><span class="fl">50</span>, upper<span class="op">=</span><span class="fl">80</span>, mspline<span class="op">=</span><span class="va">sp</span><span class="op">)</span>,</span>
<span>                             tmax<span class="op">=</span><span class="fl">3</span>, nsim<span class="op">=</span><span class="fl">30</span><span class="op">)</span></span></code></pre></div>
<p>These plots can give some idea of how much risks might be expected to
vary over time. The parameter driving these variations is <span class="math inline">\(\sigma\)</span>, whose prior can be defined with
the <code>prior_smooth</code> argument to <code>survextrap</code>. In
the default model, <span class="math inline">\(\sigma=0\)</span> means
that we are sure that the hazard will be constant. Therefore we might
want to define the prior for <span class="math inline">\(\sigma\)</span>
to rule out implausibly large changes. For example, a Gamma(2,20):</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">haz_sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mspline_priorpred.html">mspline_priorpred</a></span><span class="op">(</span>iknots<span class="op">=</span><span class="va">sp</span><span class="op">$</span><span class="va">iknots</span>, bknots<span class="op">=</span><span class="va">sp</span><span class="op">$</span><span class="va">bknots</span>, degree<span class="op">=</span><span class="va">sp</span><span class="op">$</span><span class="va">degree</span>, </span>
<span>                             coefs_mean <span class="op">=</span> <span class="va">ndi_mod</span><span class="op">$</span><span class="va">coefs_mean</span>,   </span>
<span>                             prior_smooth <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">p_gamma</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">20</span><span class="op">)</span>,   </span>
<span>                             prior_loghaz <span class="op">=</span> <span class="fu"><a href="../reference/p_meansurv.html">p_meansurv</a></span><span class="op">(</span>median<span class="op">=</span><span class="fl">50</span>, upper<span class="op">=</span><span class="fl">80</span>, mspline<span class="op">=</span><span class="va">sp</span><span class="op">)</span>,</span>
<span>                             tmax<span class="op">=</span><span class="fl">3</span>, nsim<span class="op">=</span><span class="fl">30</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">haz_sim</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">time</span>, y<span class="op">=</span><span class="va">haz</span>, group<span class="op">=</span><span class="va">rep</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Years"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Hazard"</span><span class="op">)</span></span></code></pre></div>
<p><img src="priors_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
<p>The choice of this prior might be important if we want to extrapolate
outside the data, while accounting for potential hazard changes outside
the data. If the data informing extrapolation are weak, then the
extrapolations will be sensitive to the prior for these potential hazard
changes.</p>
<p>Plotting multiple trajectories gives a rough idea, but ideally we
want a more quantitative summary of the typical amount of variation
through time.</p>
<!-- TODO What about showing posteriors compared to priors in these examples?? -->
</div>
</div>
<div class="section level3">
<h3 id="ratio-between-high-and-low-hazards-over-time">Ratio between high and low hazards over time<a class="anchor" aria-label="anchor" href="#ratio-between-high-and-low-hazards-over-time"></a>
</h3>
<p>The variation in a hazard curve can be summarised simply by taking a
fine grid of equally-spaced points between the time boundary knots, and
computing the empirical standard deviation of the hazard on those
points. If the hazard is constant, then the SD will be zero.</p>
<p>Since the SD depends on the scale of the hazard, a more useful
measure of variation would be the ratio between a particularly high and
a particularly low hazard on this grid. High and low might be defined
from the 90% and 10% quantiles over time. If the hazard is constant,
over time, this ratio will be 1.</p>
<p>These measures are computed by the <code>haz_sd()</code>
function.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">ndi_mod</span><span class="op">$</span><span class="va">prior_pred</span><span class="op">$</span><span class="fu">haz_sd</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##            sd_haz      sd_mean           hr</span></span>
<span><span class="co">## 2.5%  0.001168678 2.443512e+01 1.613613e+00</span></span>
<span><span class="co">## 50%   0.007332239 5.754781e+02 2.781123e+01</span></span>
<span><span class="co">## 97.5% 0.021517722 2.053783e+12 1.926511e+07</span></span></code></pre>
<p>The implied prior for the high/low hazard ratio is shown in the
<code>hr</code> column. This shows that the default Gamma<span class="math inline">\((a=2,b=1)\)</span> prior used in this model is
very vague. We can make it less vague by reducing <span class="math inline">\(a/b\)</span>. A Gamma(2, 5), for example, leads to
an upper 90% credible limit of about 5-6 for the hazard ratio over time.
Trial and error is probably necessary to produce a prior that is judged
plausible by this metric.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/prior_haz.html">prior_haz_sd</a></span><span class="op">(</span>mspline<span class="op">=</span><span class="va">sp</span>,                              </span>
<span>             prior_smooth <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">p_gamma</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">5</span><span class="op">)</span>,   </span>
<span>             prior_loghaz <span class="op">=</span> <span class="fu"><a href="../reference/p_meansurv.html">p_meansurv</a></span><span class="op">(</span>median<span class="op">=</span><span class="fl">50</span>, upper<span class="op">=</span><span class="fl">80</span>, mspline<span class="op">=</span><span class="va">sp</span><span class="op">)</span>, </span>
<span>             quantiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.5</span>, <span class="fl">0.9</span><span class="op">)</span>,</span>
<span>             nsim<span class="op">=</span><span class="fl">1000</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##           sd_haz    sd_mean       hr</span></span>
<span><span class="co">## 10% 0.0005275675   9.877431 1.134455</span></span>
<span><span class="co">## 50% 0.0019418839  41.158853 1.742006</span></span>
<span><span class="co">## 90% 0.0053229716 254.616143 5.791212</span></span></code></pre>
<p>Note that a large number of simulations <code>nsim</code> from the
prior may be required for a precise estimate of these tail quantiles,
and the distribution is skewed, so that the 95% credible limit may be
much higher than the 90% limit, for example.</p>
<p>Let us now fit a model and compare the posterior for this hazard
ratio to the prior…</p>
<p><em>[Further work to do on this article. Compare posteriors of RMST
between different priors]</em></p>
<!-- 

ndi_mod with 2,1 prior, prior 23 (2, 50000) posterior 2 (6,436) still implausible
ndi2_mod with 2,5 prior, prior 2 (1,25), posterior 2 (4, 18).  
so a bit tighter so still looks like this thing is not strongly identifiable from the data. 
ndi3_mod prior 1.1 (1.01, 1.44) posterior 1.04 (1.01 to 1.58). 
yeah this stuff is driven by the prior. 
IQR is a bit more robust, but still posterior is driven by the prior 

Sure this means we need informative judgements for extrapolation. 

But does this matter for getting a well fitting model for the data?  
Expect not if we are integrating the hazard over time to get the survival. 

RMST in obs period is only affected if we make strong assumptions that the hazard is constant. 
However extrapolations are affected, since they rely on the constant value at the final time,
which is affected by the assumptions about variations. 



```r
ndi2_mod <- survextrap(Surv(years, status) ~ 1, data=colons, fit_method="opt",
                       prior_loghaz = p_meansurv(median=50, upper=80, mspline=sp),
                       prior_smooth = p_gamma(2, 5))

ndi3_mod <- survextrap(Surv(years, status) ~ 1, data=colons, fit_method="opt",
                       prior_loghaz = p_meansurv(median=50, upper=80, mspline=sp),
                       prior_smooth = p_gamma(2, 50))

draws <- get_draws(ndi2_mod)
hist(draws[,"smooth_sd[1]"], prob=TRUE)
x <- seq(0, 4, 0.1)
lines(x, dgamma(x, 2, 5))
```

<img src="priors_files/figure-html/unnamed-chunk-14-1.png" width="700" />

```r
ndi_mod$prior_pred$haz_sd(hq=c(0.25, 0.75))
```

```
##             sd_haz      sd_mean           hr
## 2.5%  0.0007732824 1.739514e+01     1.198793
## 50%   0.0066788312 6.093398e+02     4.408589
## 97.5% 0.0189441127 4.097307e+09 38805.436371
```

```r
ndi2_mod$prior_pred$haz_sd(hq=c(0.25, 0.75))
```

```
##             sd_haz     sd_mean       hr
## 2.5%  0.0003979433    6.304079 1.080348
## 50%   0.0022218393   45.656962 1.529024
## 97.5% 0.0102873241 1412.630848 6.185837
```

```r
ndi3_mod$prior_pred$haz_sd(hq=c(0.25, 0.75))
```

```
##             sd_haz    sd_mean       hr
## 2.5%  2.581759e-05  0.4858311 1.006128
## 50%   1.995431e-04  3.7537410 1.038470
## 97.5% 1.107813e-03 19.1749536 1.183066
```

```r
hrtime(ndi_mod, hq=c(0.25, 0.75))
```

```
##     median    lower    upper
## 1 2.325494 1.378448 47.99107
```

```r
hrtime(ndi2_mod, hq=c(0.25, 0.75))
```

```
##     median    lower    upper
## 1 2.039763 1.321271 4.471633
```

```r
hrtime(ndi3_mod, hq=c(0.25, 0.75))
```

```
##    median    lower    upper
## 1 1.02407 1.002251 1.224311
```

```r
rmst(ndi_mod, t=3, niter=100)
```

```
##  [38;5;246m# A tibble: 1 × 5 [39m
##   variable     t median `2.5%` `97.5%`
##    [3m [38;5;246m<chr> [39m [23m     [3m [38;5;246m<num> [39m [23m   [3m [38;5;246m<num> [39m [23m   [3m [38;5;246m<num> [39m [23m    [3m [38;5;246m<num> [39m [23m
##  [38;5;250m1 [39m rmst         3   2.58   2.43    2.86
```

```r
rmst(ndi2_mod, t=3, niter=100)
```

```
##  [38;5;246m# A tibble: 1 × 5 [39m
##   variable     t median `2.5%` `97.5%`
##    [3m [38;5;246m<chr> [39m [23m     [3m [38;5;246m<num> [39m [23m   [3m [38;5;246m<num> [39m [23m   [3m [38;5;246m<num> [39m [23m    [3m [38;5;246m<num> [39m [23m
##  [38;5;250m1 [39m rmst         3   2.57   2.43    2.66
```

```r
rmst(ndi3_mod, t=3, niter=100)
```

```
##  [38;5;246m# A tibble: 1 × 5 [39m
##   variable     t median `2.5%` `97.5%`
##    [3m [38;5;246m<chr> [39m [23m     [3m [38;5;246m<num> [39m [23m   [3m [38;5;246m<num> [39m [23m   [3m [38;5;246m<num> [39m [23m    [3m [38;5;246m<num> [39m [23m
##  [38;5;250m1 [39m rmst         3   2.62   2.54    2.71
```

```r
rmst(ndi_mod, t=10, niter=100)
```

```
##  [38;5;246m# A tibble: 1 × 5 [39m
##   variable     t median `2.5%` `97.5%`
##    [3m [38;5;246m<chr> [39m [23m     [3m [38;5;246m<num> [39m [23m   [3m [38;5;246m<num> [39m [23m   [3m [38;5;246m<num> [39m [23m    [3m [38;5;246m<num> [39m [23m
##  [38;5;250m1 [39m rmst        10   7.63   4.47    8.14
```

```r
rmst(ndi2_mod, t=10, niter=100)
```

```
##  [38;5;246m# A tibble: 1 × 5 [39m
##   variable     t median `2.5%` `97.5%`
##    [3m [38;5;246m<chr> [39m [23m     [3m [38;5;246m<num> [39m [23m   [3m [38;5;246m<num> [39m [23m   [3m [38;5;246m<num> [39m [23m    [3m [38;5;246m<num> [39m [23m
##  [38;5;250m1 [39m rmst        10   7.48   5.88    8.10
```

```r
rmst(ndi3_mod, t=10, niter=100)
```

```
##  [38;5;246m# A tibble: 1 × 5 [39m
##   variable     t median `2.5%` `97.5%`
##    [3m [38;5;246m<chr> [39m [23m     [3m [38;5;246m<num> [39m [23m   [3m [38;5;246m<num> [39m [23m   [3m [38;5;246m<num> [39m [23m    [3m [38;5;246m<num> [39m [23m
##  [38;5;250m1 [39m rmst        10   6.56   5.90    7.37
```

-->
</div>
<div class="section level3">
<h3 id="sd-of-hazard-ratios-over-time-in-non-proportional-hazards-models">SD of hazard ratios over time in non-proportional hazards
models<a class="anchor" aria-label="anchor" href="#sd-of-hazard-ratios-over-time-in-non-proportional-hazards-models"></a>
</h3>
<p><em>[To do]</em></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Christopher Jackson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
