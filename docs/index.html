<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Survival extrapolation using an individual-level right-censored time-to-event dataset, supplemented with aggregated external data on longer-term survival.  A Bayesian spline-based parametric model is used, where the appropriate flexibility is automatically determined from the data.  The external data may be in the form of elicited judgements about survival probabilities at specific times, with credible intervals.">
<title>Survival Extrapolation With a Flexible Parametric Model and External Data • survextrap</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Survival Extrapolation With a Flexible Parametric Model and External Data">
<meta property="og:description" content="Survival extrapolation using an individual-level right-censored time-to-event dataset, supplemented with aggregated external data on longer-term survival.  A Bayesian spline-based parametric model is used, where the appropriate flexibility is automatically determined from the data.  The external data may be in the form of elicited judgements about survival probabilities at specific times, with credible intervals.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">survextrap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/examples.html">Examples of using survextrap</a>
    <a class="dropdown-item" href="articles/methods.html">Details of methods behind survextrap</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/chjackson/survextrap/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="survextrap">survextrap<a class="anchor" aria-label="anchor" href="#survextrap"></a>
</h1></div>
<p><code>survextrap</code> is an R package under development, to model survival from a combination of</p>
<ol style="list-style-type: decimal">
<li><p>A standard individual-level, right-censored survival dataset</p></li>
<li><p>“External” data sources in the following aggregate “count” form:</p></li>
</ol>
<table class="table">
<tr>
<th colspan="2">
Follow-up period
</th>
<th colspan="2">
Number
</th>
</tr>
<tr>
<th>
Start time <span class="math inline"><em>t</em></span>
</th>
<th>
End time <span class="math inline"><em>u</em></span>
</th>
<th>
Alive at <span class="math inline"><em>t</em></span>
</th>
<th>
Still alive at <span class="math inline"><em>u</em></span>
</th>
</tr>
<tr>
<td>
<span class="math inline"><em>t</em><sub>1</sub></span>
</td>
<td>
<span class="math inline"><em>u</em><sub>1</sub></span>
</td>
<td>
<span class="math inline"><em>n</em><sub>1</sub></span>
</td>
<td>
<span class="math inline"><em>r</em><sub>1</sub></span>
</td>
</tr>
<tr>
<td>
<span class="math inline"><em>t</em><sub>2</sub></span>
</td>
<td>
<span class="math inline"><em>u</em><sub>2</sub></span>
</td>
<td>
<span class="math inline"><em>n</em><sub>2</sub></span>
</td>
<td>
<span class="math inline"><em>r</em><sub>2</sub></span>
</td>
</tr>
<tr>
<td>
etc…
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
</table>
<p>Any number of rows can be supplied for the “external” data, and the time intervals do not have to be distinct or exhaustive.</p>
<p>The package has been developed under the expectation that many forms of external data that might be useful for survival extrapolation (such as population data, registry data or elicited judgements) can be manipulated into this common “count” form.</p>
<div class="section level3">
<h3 id="principles">Principles<a class="anchor" aria-label="anchor" href="#principles"></a>
</h3>
<ul>
<li><p>Extrapolations from short-term individual level data should be done using <em>explicit data or judgements</em> about how risk will change over time.</p></li>
<li><p>Extrapolations should not rely on standard parametric forms (e.g. Weibull, log-normal, gamma…) that are only used out of convention and do not have interpretations as plausible <em>mechanisms</em> for how risk will change over time.</p></li>
<li><p>Instead of selecting (or averaging) traditional parametric models, an <em>arbitrarily flexible</em> parametric model should be used, that <em>adapts</em> to give the optimal fit to the short-term and long-term data in combination.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="how-it-works">How it works<a class="anchor" aria-label="anchor" href="#how-it-works"></a>
</h3>
<ul>
<li><p>Bayesian multiparameter evidence synthesis is used to jointly model all sources of data and judgements.</p></li>
<li><p>An M-spline is used to represent how the hazard changes through time (as in <a href="https://arxiv.org/abs/2002.09633" class="external-link">rstanarm</a>). The Bayesian fitting method automatically chooses the optimal level of smoothness and flexibility. Spline “knots” should span the period covered by the data, and any future period where there is a chance that the hazard may vary.</p></li>
<li><p>A proportional hazards model is used to describe the relation of survival to predictors.</p></li>
<li><p>Mixture cure models are supported.</p></li>
<li><p>It has an R interface, designed to be friendly to those familiar with standard R modelling functions.</p></li>
<li><p>Stan is used under the surface to do MCMC (Hamiltonian Monte Carlo) sampling from the posterior distribution, in a similar fashion to <a href="https://mc-stan.org/rstanarm/" class="external-link">rstanarm</a> and <a href="https://CRAN.R-project.org/package=survHE" class="external-link">survHE</a>.</p></li>
<li><p>Estimates and posterior credible intervals / samples for survival, hazard, mean and restricted mean survival can easily be extracted.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="technical-details-of-the-methods">Technical details of the methods<a class="anchor" aria-label="anchor" href="#technical-details-of-the-methods"></a>
</h3>
<p>See <code><a href="articles/methods.html">vignette("methods")</a></code></p>
</div>
<div class="section level3">
<h3 id="examples-of-how-to-use-it">Examples of how to use it<a class="anchor" aria-label="anchor" href="#examples-of-how-to-use-it"></a>
</h3>
<p>See <code><a href="articles/examples.html">vignette("examples")</a></code></p>
</div>
<div class="section level2">
<h2 id="development">Development<a class="anchor" aria-label="anchor" href="#development"></a>
</h2>
<p>The package is in active development. It can currently fit a large range of useful models, but it is not finished and is subject to be changed without warning.</p>
<p>Major things to do are:</p>
<ul>
<li>
<p>Relative survival / additive hazards models.</p>
<ul>
<li>Will be easy to implement the typical model with a fixed known background hazard as additive offset to a flexibly modelled excess hazard.</li>
<li>Any interest in situations where background is uncertain, e.g. as modelled external data with a different hazard from the trial data? Package can already express this as a proportional hazards model, but what about additive hazards models, or time-varying hazard ratios or differences?</li>
</ul>
</li>
<li><p>Thoughtful default priors for hazard changes without external data, e.g. in terms of orders of magnitude.</p></li>
<li><p>Better thought-out knot choice, particularly with external data.</p></li>
<li><p>More experience and examples of using it with real external data, including a vignette that lists how to implement all previously-suggested approaches for extrapolation with external data.</p></li>
<li><p>Explain relation to dynamic GLMs as used by <a href="https://doi.org/10.1177%2F0272989X19873661" class="external-link">Kearns et al</a> and related papers. Can “random walk” principles used in their dynamic model inspire a sensible prior for hazard changes?</p></li>
<li><p>Non-proportional hazards models. This is expected to be computationally difficult, and I’m not sure of the best approach. Would it be easier in the GLM formulation (at the cost of a discrete-time approximation)?</p></li>
<li><p>Thorough testing, documentation and error handling.</p></li>
</ul>
<p>If you want to try it out - feel free to install from github:</p>
<pre class="{r}"><code><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"chjackson/survextrap"</span><span class="op">)</span></span></code></pre>
<p>Please give feedback and suggestions if you do. These can be posted on <a href="https://github.com/chjackson/survextrap/issues" class="external-link">github issues</a>, or <a href="mailto:chris.jackson@mrc-bsu.cam.ac.uk">email</a>.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/chjackson/survextrap/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/chjackson/survextrap/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing survextrap</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Christopher Jackson <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-6656-8913" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Christopher Jackson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
